var __webpack_modules__=[,(e,t,s)=>{s.r(t),s.d(t,{InstanceMarker:()=>i});class i{static REMOVAL_DISTANCE=50;constructor(e,t=0,s=i.REMOVAL_DISTANCE){}}},(e,t,s)=>{s.r(t),s.d(t,{Logger:()=>i});
/** 
 * @file A small library to class up log messages.
 * 
 * @version 1.0.0
 * @author https://github.com/doubleactii
 * @copyright Copyright (c) 2022 Evitca Studio
 * @license Logger does not have a license at this time. For licensing contact the author
 */
class i{constructor(e){this.RESET="[0m",this.BRIGHT="[1m",this.DIM="[2m",this.UNDERSCORE="[4m",this.BLINK="[5m",this.REVERSE="[7m",this.HIDDEN="[8m",this.FG_BLACK="[30m",this.FG_RED="[31m",this.FG_GREEN="[32m",this.FG_YELLOW="[33m",this.FG_BLUE="[34m",this.FG_MAGENTA="[35m",this.FG_CYAN="[36m",this.FG_WHITE="[37m",this.FG_GRAY="[90m",this.BG_BLACK="[40m",this.BG_RED="[41m",this.BG_GREEN="[42m",this.BG_YELLOW="[43m",this.BG_BLUE="[44m",this.BG_MAGENTA="[45m",this.BG_CYAN="[46m",this.BG_WHITE="[47m",this.BG_GRAY="[100m",this.TYPE_SPACER_LENGTH=13,this.types={default:this.FG_WHITE},this.currentType="",this.SPACE_CHAR=" ",this.FG_COLORS={};for(let e=0;e<=255;e++)this.FG_COLORS[e]="[38;5;"+e+"m";this.BG_COLORS={};for(let e=0;e<=255;e++)this.BG_COLORS[e]="[48;5;"+e+"m";Array.isArray(e)&&this.registerTypes(e)}prefix(e){return"string"==typeof e&&(this.currentType=e),this}message(t="log",...s){var i=this.currentType||"";if(0===i.length)console[t](...s);else{var o=i.length>=this.TYPE_SPACER_LENGTH;let e=this.types[i.toLowerCase()]?this.types[i.toLowerCase()]:this.types.default;var n=e.includes("");n||(e="color: "+e),!globalThis.window||n?console[t](e+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,o?1:0))+"|"+this.RESET,...s):console[t]("%c"+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,o?1:0))+"|",e,...s)}this.currentType=""}log(...e){this.message("log",...e)}info(...e){this.message("info",...e)}error(...e){this.message("error",...e)}warn(...e){this.message("warn",...e)}assert(...e){console.assert(...e)}debug(...e){this.message("debug",...e)}count(e){console.count(e)}countReset(e){console.countReset(e)}table(e,t){console.table(e,t)}time(e){this.message("time",e)}timeLog(e){this.message("timeLog",e)}timeEnd(e){this.message("timeEnd",e)}trace(...e){this.message("trace",...e)}group(e){this.message("group",e)}groupCollapsed(e){console.groupCollapsed(e)}groupEnd(){console.groupEnd()}clear(){console.clear()}registerType(e,t){this.types[e]||"string"==typeof e&&"string"==typeof t&&(this.types[e.toLowerCase()]=t)}registerTypes(t){if(Array.isArray(t))for(let e=0;e<t.length;e++)this.registerType(t[e].type,t[e].ansi)}unregisterType(e){this.types[e]&&delete this.types[e]}}},(e,t,s)=>{s.r(t),s.d(t,{Collector:()=>i});
/**
* A recycle manager
* @class CollectorSingleton
* @license Collector does not have a license at this time. For licensing contact the author
* @author https://github.com/doubleactii
* Copyright (c) 2023 Evitca Studio
*/
class a{static version="1.0.0";static DiobConstructor=(s=VYLO.newDiob(),t=s.__proto__.constructor,VYLO.delDiob(s),t);constructor(){this.debugging=!1,this.collectionLimit=20,this.WARNING_LIMIT=200,this.basicCollection=[]}setMaxLimit(e){"number"==typeof e&&(this.collectionLimit=Math.round(e),this.collectionLimit>this.WARNING_LIMIT)&&console.warn("Collector: This is a high value to use for a max limit in a collection! Only use this high of a value if you know what you are doing.")}collect(t,s){var e=Array.isArray(t);if(t)if("object"!=typeof t||e||Object.keys(t).length)if(t.type||e)if(Array.isArray(s))if(s.includes(t))this.debugging&&console.error("Collector: OOPS! %cpCollected","font-weight: bold","already belongs to the provided collection.");else if(e&&!t.length)console.error("Collector: OOPS! %cpCollected","font-weight: bold","is an array. But it contains nothing to recycle.");else if(e)if(s.length>=this.collectionLimit)for(let e=t.length-1;0<=e;e--){var i=t[e];i instanceof a.DiobConstructor?(this.cleanInstance(i),VYLO.delDiob(i)):(this.cleanInstance(i),VYLO.delObject(i))}else{if(t.length+s.length>this.collectionLimit)for(let e=t.length-(this.collectionLimit-s.length);0<e;e--){var o=t[e];o instanceof a.DiobConstructor?(t.splice(e,1),this.cleanInstance(o),VYLO.delDiob(o)):(t.splice(e,1),this.cleanInstance(o),VYLO.delObject(o))}for(let e=t.length-1;0<=e;e--){var n=t[e];"function"==typeof n.onCollected&&n.onCollected(),s.includes(n)||s.push(n),this.cleanInstance(n)}}else s.length>=this.collectionLimit?t instanceof a.DiobConstructor?(this.cleanInstance(t),VYLO.delDiob(t)):(this.cleanInstance(t),VYLO.delObject(t)):("function"==typeof t.onCollected&&t.onCollected(),s.includes(t)||s.push(t),this.cleanInstance(t));else console.error("Collector: Invalid variable type passed for the %cpCollection","font-weight: bold","parameter. Expecting an array. Collect failed.");else console.error("Collector: OOPS! %cpCollected","font-weight: bold"," is not a valid object It has no type.");else console.error("Collector: OOPS! %cpCollected","font-weight: bold"," is an empty object and will NOT be collected.");else console.error("Collector: There was nothing passed for the %cpCollected","font-weight: bold","parameter. Expecting a instance or an object.")}isInCollection(t="Diob",s=1,i=[],...o){var n=[];let a=0,c=s;var r,l=!VYLO.Type.getVariable(t,"baseType");if(i.length){for(let e=i.length-1;0<=e;e--)c&&(r=i[e]).type===t&&(i.splice(e,1),n.push(r),r.collectorCollected=!1,"function"==typeof r.onDumped&&r.onDumped(...o),a++,c--);if(s>a){var h=s-a;for(let e=0;e<h;e++)n.push(l?VYLO.newObject(t,...o):VYLO.newDiob(t,...o))}}else for(let e=0;e<s;e++)n.push(l?VYLO.newObject(t,...o):VYLO.newDiob(t,...o));return 1===n.length?n.pop():n}cleanInstance(e){if(e){if(e instanceof a.DiobConstructor){var t="Interface"===e.baseType||"Interface"===e.type||VYLO.Type.getInheritances(e.type).includes("Interface");e.color&&("object"==typeof e.color&&e.color.constructor===Object?(e.color.tint=16777215,e.color=e.color):e.color=null),"object"==typeof e.scale?(e.scale.x=e.scale.y=1,e.scale=e.scale):e.scale=1,t&&(e.hide(),"server"!==VYLO.World.getCodeType())&&VYLO.Client.removeInterfaceElement(e.getInterfaceName(),e,!0),e.playAnimation(),e.setTransition(),e.angle=0,e.alpha=1,e.xPos=0,e.yPos=0,t||(e.mapName=null,e.setLoc()),e.text="",e.composite="","Movable"===e.baseType&&e.move();for(const s of e.getOverlays())e.removeOverlay(s.type);for(const i of e.getFilters())e.removeFilter(i)}e.collectorCollected=!0,e.inTicker=null,"function"==typeof e.clean&&e.clean()}}toggleDebug(){this.debugging=!this.debugging}}const i=new a}],__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];return void 0!==t||(t=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](t,t.exports,__webpack_require__)),t.exports}__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={},__webpack_exports__BlipComponent=((()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BlipComponent:()=>c});__webpack_require__(1);var s=__webpack_require__(2),n=__webpack_require__(3);class p{static GAME_SIZE=VYLO?VYLO.World.getGameSize():{width:960,height:540};static GAME_SIZE_HALF={width:p.GAME_SIZE.width/2,height:p.GAME_SIZE.height/2};static CENTER_SCREEN_POSITION={x:p.GAME_SIZE.width/2,y:p.GAME_SIZE.height/2};static TILE_SIZE=32;static MAX_BLIPS=200;static storedBlips=[];static getAngle(e,t,s){let i,o;var n;return o=s?(s=e.icon?e.icon.width:32,n=e.icon?e.icon.height:32,i=e.y+n/2-(t.y+n/2),e.x+s/2-(t.x+s/2)):(i=e.y-t.y,e.x-t.x),-Math.atan2(i,o)-Math.PI}static getDistance(e,t,s){let i,o;var n;return o=s?(s=e.icon?e.icon.width:32,n=e.icon?e.icon.height:32,i=e.y+n/2-(t.y+n/2),e.x+s/2-(t.x+s/2)):(i=e.y-t.y,e.x-t.x),Math.sqrt(o*o+i*i)}static getDirection(e){return["east","southeast","south","southwest","west","northwest","north","northeast"][Math.abs(Math.floor(e*(180/Math.PI)/45+.5))%8]}paused=!1;activeBlips=[];constructor(){this.interfaceHandle=Math.random()*Math.PI/2+"-blip-interface",this.logger=new s.Logger,this.logger.registerType("BlipComponent-Module","#ff6600"),this.logger.prefix("BlipComponent-Module").log("âœ…@v1.0.0"),VYLO.Client.createInterface(this.interfaceHandle),VYLO.Client.showInterface(this.interfaceHandle);const e=this,t=function(){e.manageBlips(),requestAnimationFrame(t)};requestAnimationFrame(t)}track(e){this.activeBlips.includes(e)||this.activeBlips.push(e)}untrack(e){this.activeBlips.includes(e)&&this.activeBlips.splice(this.activeBlips.indexOf(e),1)}pause(){this.paused=!0}resume(){this.paused=!1}manageBlips(){if(!this.paused)for(const h of this.activeBlips){var t=h.icon?h.icon.width:32,s=h.icon?h.icon.height:32,i=h.mapInstance.icon?h.mapInstance.icon.width:32,o=h.mapInstance.icon?h.mapInstance.icon.height:32,t=(h.mapInstance.getScreenPos(h.screenPos),VYLO.Math.clamp((h.screenPos.x+scrM.xMapPos+i/2-t/VYLO.Client.mapView.scale.x)*VYLO.Client.mapView.scale.x,-t+h.settings.buffer,p.GAME_SIZE.width-t-h.settings.buffer)),s=VYLO.Math.clamp((h.screenPos.y+scrM.yMapPos+o/2-s/2/VYLO.Client.mapView.scale.y)*VYLO.Client.mapView.scale.y,-s/2+h.settings.buffer,p.GAME_SIZE.height-s/2-h.settings.buffer),n=Math.round(p.getDistance(VYLO.Client.mob,h.mapInstance,!0)),a=p.getAngle(VYLO.Client.mob,h.mapInstance,!0),c=p.getDirection(a);let e=!1;if(h.angle=a,h.setPos(t,s),n<h.settings.maxDistance){var r=n>=(p.GAME_SIZE_HALF.width-i/2)/VYLO.Client.mapView.scale.x,l=n>=(p.GAME_SIZE_HALF.height-o/2)/VYLO.Client.mapView.scale.y;switch(c){case"north":case"south":l&&(e=!0);break;case"east":case"west":r&&(e=!0);break;case"northwest":case"northeast":case"southwest":case"southeast":(r||l)&&(e=!0)}}e?h.show():h.hide()}}hideBlips(){for(const e of this.activeBlips)e.hide()}}const a=new p;
/**
* A Blip Component
* @class BlipComponent
* @license Blip is licensed under an MIT styled license.
* @author https://github.com/doubleactii
* Copyright (c) 2023 Evitca Studio
*/class c{static BUFFER=25;static MAX_DIST=1e3;static MAX_DISPLAY=9999;instance=null;constructor(e,t={atlasName:"",iconName:""},s={buffer:c.BUFFER,showsDistance:!1,maxDistance:c.MAX_DIST,alwaysOnTop:!1},i){var o;a.activeBlips.length>=p.MAX_BLIPS?a.logger.prefix("BlipComponent-Module").log("Max blip limit reached"):((o=n.Collector.isInCollection("Interface",1,p.storedBlips)).touchOpacity=0,o.mouseOpacity=0,o.preventAutoScale=!1,o.anchor.x=1,o.anchor.y=.5,o.atlasName=t.atlasName,o.iconName=t.iconName,o.mapInstance=e,o.screenPos={x:0,y:0},o.settings={buffer:s.buffer,showsDistance:s.showsDistance,maxDistance:s.maxDistance},s.alwaysOnTop&&(o.plane=c.MAX_DISPLAY,o.layer=c.MAX_DISPLAY),VYLO.Client.addInterfaceElement(o,a.interfaceHandle,e.id+"- blip"),o.hide(),a.track(o),this.instance=o)}remove(){this.instance&&this.instance.hide(),a.untrack(this.instance)}}})(),__webpack_exports__.BlipComponent);export{__webpack_exports__BlipComponent as BlipComponent};